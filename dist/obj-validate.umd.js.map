{"version":3,"file":"obj-validate.umd.js","sources":["../src/index.js"],"sourcesContent":["const is = require('samesame')\n\n/**\n * Check if a object contains a given key\n *\n * @param {object} object Object to check for key\n * @param {string} key Key to check for\n *\n * @returns {boolean}\n */\nfunction has (object = {}, key) {\n  return object && hasOwnProperty.call(object, key)\n}\n\n/**\n * Compare a object to a given schema\n *\n * @param {object} obj Object to compare to schema\n * @param {object} schema Schema to campare object to\n *\n * @returns {array} Array of all errors\n */\nconst validate = function (obj = {}, schema = {}) {\n  const errors = []\n\n  if (!is(obj, schema, 'Object')) {\n    throw new Error('Invalid object or schema provided')\n  }\n\n  Object.keys(schema).forEach(key => {\n    const prop = schema[key]\n\n    if (prop.required && !has(obj, key)) {\n      errors.push(ReferenceError(`Missing required property ${key}`))\n    }\n\n    if (prop.type && has(obj, key)) {\n      if (Array.isArray(prop.type)) {\n        if (!is(obj[key], ...prop.type)) {\n          errors.push(TypeError(`Invalid type. Property ${key} should be ${prop.type}`))\n        }\n      } else if (!is(obj[key], prop.type)) {\n        errors.push(TypeError(`Invalid type. Property ${key} should be ${prop.type}`))\n      }\n    }\n\n    if (prop.pattern && prop.pattern instanceof RegExp && has(obj, key)) {\n      if (!obj[key].toString().match(prop.pattern)) {\n        errors.push(\n          TypeError(`Invalid value. Property ${key} does not match pattern ${prop.pattern}`)\n        )\n      }\n    }\n  })\n\n  return errors\n}\n\nexport default validate\n"],"names":["const","is","require","has","object","key","hasOwnProperty","call","obj","schema","errors","Error","Object","keys","forEach","prop","required","push","ReferenceError","type","Array","isArray","TypeError","pattern","RegExp","toString","match"],"mappings":"0KAAAA,IAAMC,EAAKC,QAAQ,YAUnB,SAASC,EAAKC,EAAaC,GACzB,0BAAOD,GAAUE,eAAeC,KAAKH,EAAQC,UAW9B,SAAUG,EAAUC,yCACnCT,IAAMU,KAEN,IAAKT,EAAGO,EAAKC,EAAQ,UACnB,MAAM,IAAIE,MAAM,qCA6BlB,OA1BAC,OAAOC,KAAKJ,GAAQK,iBAAQT,GAC1BL,IAAMe,EAAON,EAAOJ,GAEhBU,EAAKC,WAAab,EAAIK,EAAKH,IAC7BK,EAAOO,KAAKC,4CAA4Cb,IAGtDU,EAAKI,MAAQhB,EAAIK,EAAKH,KACpBe,MAAMC,QAAQN,EAAKI,MAChBlB,gBAAGO,EAAIH,WAASU,EAAKI,QACxBT,EAAOO,KAAKK,oCAAoCjB,gBAAiBU,SAEzDd,EAAGO,EAAIH,GAAMU,EAAKI,OAC5BT,EAAOO,KAAKK,oCAAoCjB,gBAAiBU,UAIjEA,EAAKQ,SAAWR,EAAKQ,mBAAmBC,QAAUrB,EAAIK,EAAKH,KACxDG,EAAIH,GAAKoB,WAAWC,MAAMX,EAAKQ,UAClCb,EAAOO,KACLK,qCAAqCjB,6BAA8BU,eAMpEL"}